{"_path":"/getting-started/data-fetching","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"数据获取","description":"Nuxt provides composables to handle data fetching within your application.","navigation":{"icon":"uil:channel"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"数据获取"},"children":[{"type":"text","value":"数据获取"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt提供了useFetch、useLazyFetch、useAsyncData和useLazyAsyncData来处理应用程序中的数据获取。"}]},{"type":"element","tag":"alert","props":{"icon":"👉"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":" 仅在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"setup"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Lifecycle Hooks"}]},{"type":"text","value":"中生效"}]}]}]},{"type":"element","tag":"h2","props":{"id":"usefetch"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在您的页面、组件和插件中，您可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"从任何URL普遍获取数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"该组合式提供了一个方便的包装器，围绕"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":"。它基于URL和获取选项自动生成密钥，基于服务器路由为请求URL提供类型提示，并推断API响应类型。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-fetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"示例"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data: count } = await useFetch('/api/count')\r\n</script>\r\n\r\n<template>\r\n  Page visits: {{ count }}\r\n</template>\n","filename":"app.vue","language":"vue","meta":"[app.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  Page visits: {{ count }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"link-example","props":{"link":"/docs/examples/composables/use-fetch"},"children":[]},{"type":"element","tag":"h2","props":{"id":"uselazyfetch"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个组合式的行为与设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy: true"}]},{"type":"text","value":"选项的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"完全相同。换句话说，异步函数不会阻塞导航。这意味着您需要处理数据为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":"的情况（或者您在自定义"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":"工厂函数中提供的任何值）。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-lazy-fetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"示例-1"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <!-- you will need to handle a loading state -->\r\n  <div v-if=\"pending\">\r\n    Loading ...\r\n  </div>\r\n  <div v-else>\r\n    <div v-for=\"post in posts\">\r\n      <!-- do something -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: posts } = useLazyFetch('/api/posts')\r\nwatch(posts, (newPosts) => {\r\n  // Because posts starts out null, you will not have access\r\n  // to its contents immediately, but you can watch it.\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"<!-- you will need to handle a loading state -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"v-if"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"pending\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    Loading ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"v-else"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"v-for"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"post in posts\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"<!-- do something -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"posts"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/posts'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(posts, ("}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"newPosts"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"// Because posts starts out null, you will not have access\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"// to its contents immediately, but you can watch it.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"useasyncdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在您的页面、组件和插件中，您可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"来获取异步解析的数据访问权限。"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可能会问自己："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"之间有什么区别？\r\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\r\n简而言之，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"接收一个URL并获取该数据，而"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"可能具有更复杂的逻辑。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch（url）"}]},{"type":"text","value":"几乎等同于"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData（url，（）=> $fetch（url））"}]},{"type":"text","value":"-它是最常见用例的开发者体验语法糖。"}]}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-async-data"},"children":[]},{"type":"element","tag":"h3","props":{"id":"示例-2"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"let counter = 0\r\nexport default defineEventHandler(() => {\r\n  counter++\r\n  return counter\r\n})\n","filename":"server/api/count.ts","language":"ts","meta":"[server/api/count.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" counter "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  counter"}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"++\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" counter\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data } = await useAsyncData('count', () => $fetch('/api/count'))\r\n</script>\r\n\r\n<template>\r\n  Page visits: {{ data }}\r\n</template>\n","filename":"app.vue","language":"vue","meta":"[app.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  Page visits: {{ data }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"link-example","props":{"link":"/docs/examples/composables/use-async-data"},"children":[]},{"type":"element","tag":"h2","props":{"id":"uselazyasyncdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个组合式的行为与设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy: true"}]},{"type":"text","value":"选项的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"完全相同。换句话说，异步函数不会阻塞导航。这意味着您需要处理数据为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":"的情况（或者您在自定义"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":"工厂函数中提供的任何值）。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-lazy-async-data"},"children":[]},{"type":"element","tag":"h3","props":{"id":"示例-3"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <div>\r\n    {{ pending ? 'Loading' : count }}\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: count } = useLazyAsyncData('count', () => $fetch('/api/count'))\r\nwatch(count, (newCount) => {\r\n  // Because count starts out null, you won't have access\r\n  // to its contents immediately, but you can watch it.\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    {{ pending ? 'Loading' : count }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(count, ("}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"newCount"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"// Because count starts out null, you won't have access\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"// to its contents immediately, but you can watch it.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"刷新数据"},"children":[{"type":"text","value":"刷新数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有时在用户访问页面的过程中，您可能需要刷新从API加载的数据。如果用户选择分页、过滤结果、搜索等操作，就可能发生这种情况。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以利用从"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch()"}]},{"type":"text","value":"组合式返回的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":"方法使用不同的查询参数来刷新数据："}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst page = ref(1);\r\n\r\nconst { data: users, pending, refresh, error } = await useFetch(() => `users?page=${page.value}&take=6`, { baseURL: config.API_BASE_URL }\r\n);\r\n\r\nfunction previous() {\r\n  page.value--;\r\n  refresh();\r\n}\r\n\r\nfunction next() {\r\n  page.value++;\r\n  refresh();\r\n}\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"`users?page=${"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"}&take=6`"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", { baseURL: config."}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"API_BASE_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"previous"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  page.value"}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  page.value"}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使这个工作的关键是在查询参数发生变化时调用从"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch()"}]},{"type":"text","value":"组合式返回的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":"方法。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"默认情况下，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":"将取消任何挂起的请求；它们的结果不会更新数据或挂起状态。任何先前等待的Promise都不会在新请求解决之前解决。您可以通过设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dedupe"}]},{"type":"text","value":"选项来防止这种行为，如果有正在执行的请求，则会返回该请求的Promise。"}]},{"type":"element","tag":"code","props":{"code":"refresh({ dedupe: true })\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"({ dedupe: "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"refreshnuxtdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refreshNuxtData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":"的缓存失效并触发重新获取。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您想刷新当前页面的所有数据获取，则此方法很有用。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/refresh-nuxt-data"},"children":[]},{"type":"element","tag":"h4","props":{"id":"示例-4"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <div>\r\n    {{ pending ? 'Loading' : count }}\r\n  </div>\r\n  <button @click=\"refresh\">Refresh</button>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: count } = useLazyAsyncData('count', () => $fetch('/api/count'))\r\n\r\nconst refresh = () => refreshNuxtData('count')\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    {{ pending ? 'Loading' : count }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"refresh\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">Refresh</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"refreshNuxtData"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"clearnuxtdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearNuxtData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"删除"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"的缓存数据、错误状态和挂起的Promise。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您想使另一个页面的数据获取失效，则此方法很有用。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/clear-nuxt-data"},"children":[]},{"type":"element","tag":"h2","props":{"id":"options-api-支持"},"children":[{"type":"text","value":"Options API 支持"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3 提供了一种在 Options API 中执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" 获取的方式。为了使其工作，您必须将组件定义包装在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defineNuxtComponent"}]},{"type":"text","value":" 中。"}]},{"type":"element","tag":"code","props":{"code":"<script>\r\nexport default defineNuxtComponent({\r\n  fetchKey: 'hello',\r\n  async asyncData () {\r\n    return {\r\n      hello: await $fetch('/api/hello')\r\n    }\r\n  }\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"defineNuxtComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"fetchKey: "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'hello'"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      hello: "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/hello'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Nuxt 3 中，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]},{"type":"text","value":" 声明 Vue 组件是推荐的方式。"}]}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/define-nuxt-component"},"children":[]},{"type":"element","tag":"h2","props":{"id":"同构的-fetch-和-fetch"},"children":[{"type":"text","value":"同构的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们在浏览器中调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" 时，用户的 header（如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":"）将直接发送到 API。但在服务器端渲染期间，由于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" 请求在服务器内部发生，因此不包括用户的浏览器 cookie，也不会传递来自 fetch 响应的 cookie。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/dollarfetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"示例将客户端-header-传递给-api"},"children":[{"type":"text","value":"示例：将客户端 Header 传递给 API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以使用 "},{"type":"element","tag":"a","props":{"href":"/docs/api/composables/use-request-headers"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" 来访问并代理从服务器向 API 传递 Cookie。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面的示例将请求头添加到 isomorphic "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 调用中，以确保 API 端点可以访问最初由用户发送的相同 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" 头。"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst headers = useRequestHeaders(['cookie'])\r\nconst { data } = await useFetch('/api/me', { headers })\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useRequestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/me'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", { headers })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请注意，在将标头代理到外部API之前要非常小心，并只包括您需要的标头。并非所有标头都是安全的，可能会引入不需要的行为。以下是不应代理的常见标头列表："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"accept"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-length"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-md5"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-type"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-host"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-port"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-proto"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cf-connecting-ip"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cf-ray"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"示例在-ssr-响应中传递来自服务器端-api-调用的-cookie"},"children":[{"type":"text","value":"示例：在 SSR 响应中传递来自服务器端 API 调用的 Cookie"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你想把 cookies 从一个内部请求代理到客户端，你需要自行处理这个问题。"}]},{"type":"element","tag":"code","props":{"code":"export const fetchWithCookie = async (event: H3Event, url: string) => {\r\n  const res = await $fetch.raw(url)\r\n  const cookies = (res.headers.get('set-cookie') || '').split(',')\r\n  for (const cookie of cookies) {\r\n    appendHeader(event, 'set-cookie', cookie)\r\n  }\r\n  return res._data\r\n}\n","filename":"composables/fetch.ts","language":"ts","meta":"[composables/fetch.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"fetchWithCookie"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"H3Event"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" $fetch."}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"raw"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(url)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"cookies"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" (res.headers."}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'set-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"','"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" cookies) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"appendHeader"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(event, "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'set-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", cookie)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" res._data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\r\n// This composable will automatically pass cookies to the client\r\nconst event = useRequestEvent()\r\nconst result = await fetchWithCookie(event, '/api/with-cookie')\r\nonMounted(() => console.log(document.cookie))\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f10548"},"children":[{"type":"text","value":"// This composable will automatically pass cookies to the client\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useRequestEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"fetchWithCookie"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(event, "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/with-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"onMounted"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" console."}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"(document.cookie))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"最佳实践"},"children":[{"type":"text","value":"最佳实践"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这些可组合函数返回的数据将存储在页面负载中。这意味着除了在组件中使用的键之外，返回的每个键都将添加到负载中"}]},{"type":"element","tag":"alert","props":{"icon":"👉"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"我们强烈建议您只选择在组件中使用的键。"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/mountains/everest"}]},{"type":"text","value":"返回以下对象："}]},{"type":"element","tag":"code","props":{"code":"{\r\n  \"title\": \"Mount Everest\",\r\n  \"description\": \"Mount Everest is Earth's highest mountain above sea level, located in the Mahalangur Himal sub-range of the Himalayas. The China–Nepal border runs across its summit point\",\r\n  \"height\": \"8,848 m\",\r\n  \"countries\": [\r\n    \"China\",\r\n    \"Nepal\"\r\n  ],\r\n  \"continent\": \"Asia\",\r\n  \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Everest_kalapatthar.jpg/600px-Everest_kalapatthar.jpg\"\r\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"title\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"Mount Everest\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"description\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"Mount Everest is Earth's highest mountain above sea level, located in the Mahalangur Himal sub-range of the Himalayas. The China–Nepal border runs across its summit point\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"height\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"8,848 m\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"countries\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"China\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"Nepal\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"continent\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"Asia\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"\"image\""}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"\"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Everest_kalapatthar.jpg/600px-Everest_kalapatthar.jpg\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您计划仅在组件中使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"title"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"description"}]},{"type":"text","value":"，则可以通过链接"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pick"}]},{"type":"text","value":"选项来选择键："}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data: mountain } = await useFetch('/api/mountains/everest', { pick: ['title', 'description'] })\r\n</script>\r\n\r\n<template>\r\n  <h1>{{ mountain.title }}</h1>\r\n  <p>{{ mountain.description }}</p>\r\n</template>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"mountain"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'/api/mountains/everest'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", { pick: ["}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'title'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"'description'"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"] })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">{{ mountain.title }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">{{ mountain.description }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"使用-async-setup"},"children":[{"type":"text","value":"使用 Async Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您正在使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async setup()"}]},{"type":"text","value":"，那么当前组件实例将在第一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" 后丢失。（这是 Vue 3 的限制。）如果您想使用多个 async 操作，比如多个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 调用，那么您需要在 setup 的结尾一起使用它们或使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"alert","props":{"icon":"👉"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"推荐使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":"，因为它消除了使用顶级 await 的限制。"},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/api/sfc-script-setup.html#top-level-await","rel":["nofollow"]},"children":[{"type":"text","value":"了解更多"}]}]}]},{"type":"element","tag":"code","props":{"code":"<script>\r\nexport default defineComponent({\r\n  async setup() {\r\n    const [{ data: organization }, { data: repos }] = await Promise.all([\r\n      useFetch(`https://api.github.com/orgs/nuxt`),\r\n      useFetch(`https://api.github.com/orgs/nuxt/repos`)\r\n    ])\r\n\r\n    return {\r\n      organization,\r\n      repos\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <header>\r\n    <h1>{{ organization.login }}</h1>\r\n    <p>{{ organization.description }}</p>\r\n  </header>\r\n</template>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"defineComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" [{ "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"organization"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" }, { "}]},{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"repos"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" }] "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1268be"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"`https://api.github.com/orgs/nuxt`"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-c78be9"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e9d47"},"children":[{"type":"text","value":"`https://api.github.com/orgs/nuxt/repos`"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    ])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ab72d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      organization,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"      repos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-692e1c"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"header"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">{{ organization.login }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">{{ organization.description }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"header"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9f8c32"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9a4bd8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"直接调用-api-endpoint"},"children":[{"type":"text","value":"直接调用 API Endpoint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有些情况下，您可能需要直接调用 API。 Nuxt 3 提供了一个全局可用的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 方法，使用 "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/ofetch","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/ofetch"}]},{"type":"text","value":"（除了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":"）与 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch","rel":["nofollow"]},"children":[{"type":"text","value":"Fetch API"}]},{"type":"text","value":" 具有相同的 API。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 有许多好处，包括："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果它在服务器上运行，它将“智能地”进行直接 API 调用，或者如果它在客户端上运行，则进行对您的 API 的客户端调用。（它也可以处理调用第三方 API。）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，它还提供了一些方便的功能，包括自动解析响应和字符串化数据。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f10548{color:#6E7781}\n.ct-6e9d47{color:#0A3069}\n.ct-c78be9{color:#8250DF}\n.ct-692e1c{color:#953800}\n.ct-4ab72d{color:#CF222E}\n.ct-1268be{color:#0550AE}\n.ct-9f8c32{color:#116329}\n.ct-9a4bd8{color:#24292F}\n.dark .ct-9a4bd8{color:#C9D1D9}\n.dark .ct-9f8c32{color:#7EE787}\n.dark .ct-1268be{color:#79C0FF}\n.dark .ct-4ab72d{color:#FF7B72}\n.dark .ct-692e1c{color:#FFA657}\n.dark .ct-c78be9{color:#D2A8FF}\n.dark .ct-6e9d47{color:#A5D6FF}\n.dark .ct-f10548{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usefetch","depth":2,"text":"useFetch","children":[{"id":"示例","depth":3,"text":"示例"}]},{"id":"uselazyfetch","depth":2,"text":"useLazyFetch","children":[{"id":"示例-1","depth":3,"text":"示例"}]},{"id":"useasyncdata","depth":2,"text":"useAsyncData","children":[{"id":"示例-2","depth":3,"text":"示例"}]},{"id":"uselazyasyncdata","depth":2,"text":"useLazyAsyncData","children":[{"id":"示例-3","depth":3,"text":"示例"}]},{"id":"刷新数据","depth":2,"text":"刷新数据","children":[{"id":"refreshnuxtdata","depth":3,"text":"refreshNuxtData"},{"id":"clearnuxtdata","depth":3,"text":"clearNuxtData"}]},{"id":"options-api-支持","depth":2,"text":"Options API 支持"},{"id":"同构的-fetch-和-fetch","depth":2,"text":"同构的 fetch 和 $fetch","children":[{"id":"示例将客户端-header-传递给-api","depth":3,"text":"示例：将客户端 Header 传递给 API"},{"id":"示例在-ssr-响应中传递来自服务器端-api-调用的-cookie","depth":3,"text":"示例：在 SSR 响应中传递来自服务器端 API 调用的 Cookie"}]},{"id":"最佳实践","depth":2,"text":"最佳实践"},{"id":"使用-async-setup","depth":2,"text":"使用 Async Setup"},{"id":"直接调用-api-endpoint","depth":2,"text":"直接调用 API Endpoint"}]}},"_type":"markdown","_id":"content:1.getting-started:6.data-fetching.md","_source":"content","_file":"1.getting-started/6.data-fetching.md","_extension":"md"}