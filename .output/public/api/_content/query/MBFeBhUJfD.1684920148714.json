{"_path":"/guide/concepts/server-engine","_dir":"concepts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"服务器引擎","description":"Nuxt 3由一个新的服务器引擎Nitro驱动。","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"服务器引擎"},"children":[{"type":"text","value":"服务器引擎"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3由一个新的服务器引擎"},{"type":"element","tag":"a","props":{"href":"https://nitro.unjs.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Nitro"}]},{"type":"text","value":"驱动。"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"支持Node.js、浏览器、Service Workers等多个平台。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"开箱即用的无服务器（Serverless）支持。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"支持API路由。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"自动代码分割和异步加载的块。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用于静态和无服务器站点的混合模式。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"带有热模块重载的开发服务器。"}]}]}]},{"type":"element","tag":"h2","props":{"id":"api层"},"children":[{"type":"text","value":"API层"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nitro内部使用"},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/h3","rel":["nofollow"]},"children":[{"type":"text","value":"h3"}]},{"type":"text","value":"添加服务器"},{"type":"element","tag":"a","props":{"href":"/guide/directory-structure/server#api-routes"},"children":[{"type":"text","value":"API端点"}]},{"type":"text","value":"和"},{"type":"element","tag":"a","props":{"href":"/guide/directory-structure/server#server-middleware"},"children":[{"type":"text","value":"中间件"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关键功能包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"处理程序可以直接返回对象/数组以自动处理JSON响应"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"处理程序可以返回Promise，并将等待其完成（也支持"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.end()"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"next()"}]},{"type":"text","value":"）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提供有关请求主体解析、cookie处理、重定向、标头等的辅助函数"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请参阅"},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/h3","rel":["nofollow"]},"children":[{"type":"text","value":"h3文档"}]},{"type":"text","value":"以了解更多信息。"}]},{"type":"element","tag":"alert","props":{"icon":"ℹ️","type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"a","props":{"href":"/guide/directory-structure/server"},"children":[{"type":"text","value":"`server/"}]},{"type":"text","value":"目录中了解有关API层的更多信息。"}]}]},{"type":"element","tag":"h2","props":{"id":"直接api调用"},"children":[{"type":"text","value":"直接API调用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nitro允许通过全局可用的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":"助手“直接”调用路由。如果在浏览器上运行，它将向服务器发起API调用，但如果在服务器上运行，它将直接调用相关函数，从而"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"节省了额外的API调用"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" API使用"},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/ofetch","rel":["nofollow"]},"children":[{"type":"text","value":"ofetch"}]},{"type":"text","value":"，具有以下主要功能："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"自动解析JSON响应（如果需要，可访问原始响应）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"请求主体和参数会自动处理，并正确设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Type"}]},{"type":"text","value":"标头"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有关"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":"功能的更多信息，请参阅"},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/ofetch","rel":["nofollow"]},"children":[{"type":"text","value":"ofetch"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h2","props":{"id":"类型化的api路由"},"children":[{"type":"text","value":"类型化的API路由"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当使用API路由（或中间件）时，只要返回值而不是使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.end()"}]},{"type":"text","value":"发送响应，Nitro将为这些路由生成类型定义。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch()"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch()"}]},{"type":"text","value":"时，您可以访问这些类型。"}]},{"type":"element","tag":"h2","props":{"id":"独立服务器"},"children":[{"type":"text","value":"独立服务器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nitro生成一个独立的服务器dist，与"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":"无关。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 2中的服务器不是独立的，需要Nuxt核心的部分参与，通过运行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":"（使用"},{"type":"element","tag":"a","props":{"href":"https://www.npmjs.com/package/nuxt-start","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-start"}]}]},{"type":"text","value":"或"},{"type":"element","tag":"a","props":{"href":"https://www.npmjs.com/package/nuxt","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt"}]}]},{"type":"text","value":"分发版）或自定义编程使用，这种方法容易出错、容易出现故障，并且不适用于无服务器和服务工作者环境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当运行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":"命令时，Nuxt 3会生成这个dist，并存储在"},{"type":"element","tag":"a","props":{"href":"/guide/directory-structure/output"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".output"}]}]},{"type":"text","value":"目录中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输出包含了在任何环境中运行Nuxt服务器所需的运行时代码（包括实验性的浏览器服务工作者！），并提供静态文件的服务，使其成为真正的JAMstack混合框架。此外，Nuxt实现了原生存储层，支持多源驱动程序和本地资源。"}]},{"type":"element","tag":"alert","props":{"icon":"IconCode","type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在GitHub上查看Nitro引擎："},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/nitro","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/nitro"}]},{"type":"text","value":"。"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"api层","depth":2,"text":"API层"},{"id":"直接api调用","depth":2,"text":"直接API调用"},{"id":"类型化的api路由","depth":2,"text":"类型化的API路由"},{"id":"独立服务器","depth":2,"text":"独立服务器"}]}},"_type":"markdown","_id":"content:2.guide:1.concepts:4.server-engine.md","_source":"content","_file":"2.guide/1.concepts/4.server-engine.md","_extension":"md"}