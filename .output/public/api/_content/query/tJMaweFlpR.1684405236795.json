{"_path":"/getting-started/error-handling","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"错误处理","description":"学习如何在不同的生命周期中捕获错误。","navigation":{"icon":"uil:bug"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"错误处理"},"children":[{"type":"text","value":"错误处理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"学习如何在不同的生命周期中捕获错误。"}]},{"type":"element","tag":"h2","props":{"id":"处理错误"},"children":[{"type":"text","value":"处理错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3是一个全栈框架，意味着在不同的上下文中可能会发生几种不可预防的用户运行时错误："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在Vue渲染生命周期（SSR + SPA）期间的错误"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在API或Nitro服务器生命周期期间的错误"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"服务器和客户端启动错误（SSR + SPA）"}]}]},{"type":"element","tag":"h3","props":{"id":"在vue渲染生命周期ssr-spa期间的错误"},"children":[{"type":"text","value":"在Vue渲染生命周期（SSR + SPA）期间的错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以使用"},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/api/composition-api-lifecycle.html#onerrorcaptured","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"onErrorCaptured"}]}]},{"type":"text","value":"钩子来捕获Vue错误。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，Nuxt提供了一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue:error"}]},{"type":"text","value":"钩子，如果有任何错误传播到顶层，将会被调用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您正在使用错误报告框架，您可以通过"},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/api/application.html#app-config-errorhandler","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vueApp.config.errorHandler"}]}]},{"type":"text","value":"提供一个全局处理程序。它将接收所有的Vue错误，即使它们已经被处理。"}]},{"type":"element","tag":"h4","props":{"id":"使用全局错误报告框架的示例"},"children":[{"type":"text","value":"使用全局错误报告框架的示例"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtPlugin((nuxtApp) => {\r\n  nuxtApp.vueApp.config.errorHandler = (error, context) => {\r\n    // ...\r\n  }\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"defineNuxtPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":"((nuxtApp) "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  nuxtApp.vueApp.config."}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"errorHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":"context"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1dc16"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-40ba92"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"服务器和客户端启动错误ssr-spa"},"children":[{"type":"text","value":"服务器和客户端启动错误（SSR + SPA）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果在启动Nuxt应用程序时发生任何错误，Nuxt将调用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app:error"}]},{"type":"text","value":"钩子。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运行Nuxt插件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"处理"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app:created"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app:beforeMount"}]},{"type":"text","value":"钩子"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"挂载应用程序（在客户端），虽然您应该使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"onErrorCaptured"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue:error"}]},{"type":"text","value":"来处理这种情况"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"处理"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app:mounted"}]},{"type":"text","value":"钩子"}]}]},{"type":"element","tag":"h3","props":{"id":"api或nitro服务器生命周期期间的错误"},"children":[{"type":"text","value":"API或Nitro服务器生命周期期间的错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"目前您无法为这些错误定义服务器端处理程序，但可以渲染一个错误页面（请参阅下一节）。"}]},{"type":"element","tag":"h2","props":{"id":"渲染错误页面"},"children":[{"type":"text","value":"渲染错误页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当Nuxt遇到致命错误时，无论是在服务器生命周期期间还是在渲染Vue应用程序时（包括SSR和SPA），它将渲染一个JSON响应（如果使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":"头请求）或一个HTML错误页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以通过在应用程序的源目录中添加"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/error.vue"}]},{"type":"text","value":"来自定义此错误页面，与"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app.vue"}]},{"type":"text","value":"放在一起。该页面有一个名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error"}]},{"type":"text","value":"的单个属性，其中包含一个错误供您处理。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当您准备移除错误页面时，可以调用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearError"}]},{"type":"text","value":"辅助函数，它接受一个可选的重定向路径（例如，如果您想导航到一个“安全”的页面）。"}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在使用依赖于Nuxt插件的任何内容之前，请确保进行检查，例如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$route"}]},{"type":"text","value":"或u"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"seRouter"}]},{"type":"text","value":"，因为如果插件抛出错误，则在清除错误之前不会重新运行插件。"}]}]},{"type":"element","tag":"h3","props":{"id":"示例"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <button @click=\"handleError\">Clear errors</button>\r\n</template>\r\n\r\n<script setup>\r\nconst props = defineProps({\r\n  error: Object\r\n})\r\n\r\nconst handleError = () => clearError({ redirect: '/' })\r\n</script>\n","filename":"error.vue","language":"vue","meta":"[error.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"\"handleError\""}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">Clear errors</"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"defineProps"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  error: Object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"handleError"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"clearError"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"({ redirect: "}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"'/'"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"错误辅助方法"},"children":[{"type":"text","value":"错误辅助方法"}]},{"type":"element","tag":"h3","props":{"id":"useerror"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useError"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function useError (): Ref<Error | { url, statusCode, statusMessage, message, description, data }>"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此函数将返回正在处理的全局Nuxt错误。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-error"},"children":[]},{"type":"element","tag":"h3","props":{"id":"createerror"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"createError"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function createError (err: { cause, data, message, name, stack, statusCode, statusMessage, fatal }): Error"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以使用此函数创建带有附加元数据的错误对象。它可在您应用程序的Vue和Nitro部分中使用，并且旨在被抛出。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"createError"}]},{"type":"text","value":"创建并抛出错误："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"on server-side, it will trigger a full-screen error page which you can clear with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearError"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在服务器端，它将触发一个全屏错误页面，您可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearError"}]},{"type":"text","value":"来清除。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在客户端，它将抛出一个非致命错误供您处理。如果您需要触发一个全屏错误页面，则可以通过设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fatal: true"}]},{"type":"text","value":"来实现。"}]}]},{"type":"element","tag":"h3","props":{"id":"示例-1"},"children":[{"type":"text","value":"示例"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst route = useRoute()\r\nconst { data } = await useFetch(`/api/movies/${route.params.slug}`)\r\nif (!data.value) {\r\n  throw createError({ statusCode: 404, statusMessage: 'Page Not Found' })\r\n}\r\n</script>\n","filename":"pages/movies/[slug].vue","language":"vue","meta":"[pages/movies/[slug].vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"route"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"useRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"`/api/movies/${"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"route"}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"slug"}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"data.value) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e2648e"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de0884"},"children":[{"type":"text","value":"createError"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"({ statusCode: "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":", statusMessage: "}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"'Page Not Found'"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"showerror"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"showError"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function showError (err: string | Error | { statusCode, statusMessage }): Error"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以在客户端的任何时候调用此函数，或者（在服务器端）直接在中间件、插件"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"或setup()"}]},{"type":"text","value":"函数中调用。它将触发一个全屏错误页面，您可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearError"}]},{"type":"text","value":"来清除。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建议改为使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"throw createError()"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/show-error"},"children":[]},{"type":"element","tag":"h3","props":{"id":"clearerror"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearError"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function clearError (options?: { redirect?: string }): Promise<void>"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此函数将清除当前处理的Nuxt错误。它还接受一个可选的重定向路径（例如，如果您想导航到一个“安全”的页面）。"}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/clear-error"},"children":[]},{"type":"element","tag":"h2","props":{"id":"在您的应用程序中渲染错误"},"children":[{"type":"text","value":"在您的应用程序中渲染错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt还提供了一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<NuxtErrorBoundary>"}]},{"type":"text","value":"组件，允许您在应用程序内部处理客户端错误，而无需用错误页面替换整个站点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"该组件负责处理其默认插槽中发生的错误。在客户端，它将阻止错误向上冒泡，并将渲染"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#error"}]},{"type":"text","value":"插槽。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#error"}]},{"type":"text","value":"插槽将接收"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error"}]},{"type":"text","value":"作为属性（如果设置"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error = null"}]},{"type":"text","value":"，它将触发重新渲染默认插槽；您需要确保错误已完全解决，否则错误插槽将只会被再次渲染）。"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果导航到另一个路由，错误将自动清除。"}]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <!-- some content -->\r\n  <NuxtErrorBoundary @error=\"someErrorLogger\">\r\n    <!-- You use the default slot to render your content -->\r\n    <template #error=\"{ error }\">\r\n      You can display the error locally here.\r\n      <button @click=\"error = null\">\r\n        This will clear the error.\r\n      </button>\r\n    </template>\r\n  </NuxtErrorBoundary>\r\n</template>\n","filename":"pages/index.vue","language":"vue","meta":"[pages/index.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1dc16"},"children":[{"type":"text","value":"<!-- some content -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-0cbfa7"},"children":[{"type":"text","value":"NuxtErrorBoundary"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"@error"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"\"someErrorLogger\""}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1dc16"},"children":[{"type":"text","value":"<!-- You use the default slot to render your content -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" #"}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"{ error }"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"      You can display the error locally here.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"      <"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f6910"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-eedec8"},"children":[{"type":"text","value":"\"error = null\""}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"        This will clear the error.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"      </"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-0cbfa7"},"children":[{"type":"text","value":"NuxtErrorBoundary"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-b3b426"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-00be51"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"link-example","props":{"link":"/docs/examples/app/error-handling"},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0cbfa7{color:#82071E}\n.ct-eedec8{color:#0A3069}\n.ct-6f6910{color:#0550AE}\n.ct-b3b426{color:#116329}\n.ct-b1dc16{color:#6E7781}\n.ct-00be51{color:#24292F}\n.ct-de0884{color:#8250DF}\n.ct-40ba92{color:#953800}\n.ct-e2648e{color:#CF222E}\n.dark .ct-e2648e{color:#FF7B72}\n.dark .ct-40ba92{color:#FFA657}\n.dark .ct-de0884{color:#D2A8FF}\n.dark .ct-00be51{color:#C9D1D9}\n.dark .ct-b1dc16{color:#8B949E}\n.dark .ct-b3b426{color:#7EE787}\n.dark .ct-6f6910{color:#79C0FF}\n.dark .ct-eedec8{color:#A5D6FF}\n.dark .ct-0cbfa7{color:#FFA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"处理错误","depth":2,"text":"处理错误","children":[{"id":"在vue渲染生命周期ssr-spa期间的错误","depth":3,"text":"在Vue渲染生命周期（SSR + SPA）期间的错误"},{"id":"服务器和客户端启动错误ssr-spa","depth":3,"text":"服务器和客户端启动错误（SSR + SPA）"},{"id":"api或nitro服务器生命周期期间的错误","depth":3,"text":"API或Nitro服务器生命周期期间的错误"}]},{"id":"渲染错误页面","depth":2,"text":"渲染错误页面","children":[{"id":"示例","depth":3,"text":"示例"}]},{"id":"错误辅助方法","depth":2,"text":"错误辅助方法","children":[{"id":"useerror","depth":3,"text":"useError"},{"id":"createerror","depth":3,"text":"createError"},{"id":"示例-1","depth":3,"text":"示例"},{"id":"showerror","depth":3,"text":"showError"},{"id":"clearerror","depth":3,"text":"clearError"}]},{"id":"在您的应用程序中渲染错误","depth":2,"text":"在您的应用程序中渲染错误","children":[{"id":"example","depth":3,"text":"Example"}]}]}},"_type":"markdown","_id":"content:1.getting-started:8.error-handling.md","_source":"content","_file":"1.getting-started/8.error-handling.md","_extension":"md"}