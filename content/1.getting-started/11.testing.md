---
navigation.icon: uil:check-circle
---

# æµ‹è¯•

å¦‚ä½•æµ‹è¯•æ‚¨çš„Nuxtåº”ç”¨ç¨‹åºã€‚

::alert{icon=ğŸ‘‰}
æµ‹è¯•å·¥å…·ä»åœ¨å¼€å‘ä¸­ï¼ŒAPIå’Œè¡Œä¸ºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚ç›®å‰ï¼Œå®ƒå¤„äºé¢„è§ˆé˜¶æ®µï¼Œä½†å°šæœªå‡†å¤‡å¥½ç”¨äºæµ‹è¯•ç”Ÿäº§åº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨æ˜¯æ¨¡å—çš„ä½œè€…ï¼Œæ‚¨å¯ä»¥åœ¨[Module Author's guide](/docs/guide/going-further/modules#testing)ä¸­æ‰¾åˆ°æ›´å…·ä½“çš„ä¿¡æ¯ã€‚
::

åœ¨Nuxt 3ä¸­ï¼Œæˆ‘ä»¬é‡æ–°ç¼–å†™äº†`@nuxt/test-utils`çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬æ”¯æŒ[Vitest](https://github.com/vitest-dev/vitest)å’Œ[Jest](https://jestjs.io/)ä½œä¸ºæµ‹è¯•è¿è¡Œå™¨ã€‚

## å®‰è£…

```bash
yarn add --dev @nuxt/test-utils vitest
```

## Setup

åœ¨æ¯ä¸ªä½¿ç”¨`@nuxt/test-utils`è¾…åŠ©æ–¹æ³•çš„`describe`å—ä¸­ï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½®æµ‹è¯•ä¸Šä¸‹æ–‡ã€‚

```ts
import { describe, test } from 'vitest'
import { setup, $fetch } from '@nuxt/test-utils'

describe('My test', async () => {
  await setup({
    // test context options
  })

  test('my test', () => {
    // ...
  })
})
```

åœ¨å¹•åï¼Œ`setup`åœ¨`beforeAll`ã€`beforeEach`ã€`afterEach`å’Œ`afterAll`ä¸­æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œä»¥æ­£ç¡®è®¾ç½®Nuxtæµ‹è¯•ç¯å¢ƒã€‚

## é€‰é¡¹

### Nuxté…ç½®

#### `rootDir`

å°†ç›®å½•è·¯å¾„è®¾ç½®ä¸ºåŒ…å«è¦è¿›è¡Œæµ‹è¯•çš„Nuxtåº”ç”¨ç¨‹åºçš„ç›®å½•ã€‚

* Type: `string`
* Default: `'.'`

#### `configFile`

é…ç½®æ–‡ä»¶çš„åç§°ã€‚

* Type: `string`
* Default: `'nuxt.config'`

<!--
#### config

Object with configuration overrides.

* Type: `NuxtConfig`
* Default: `{}` -->

### Setup Timings

#### `setupTimeout`

è®¾ç½®æµ‹è¯•æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œç”¨äºå®Œæˆ`setupTest`çš„å·¥ä½œï¼ˆè¿™å¯èƒ½åŒ…æ‹¬æ„å»ºæˆ–ç”ŸæˆNuxtåº”ç”¨ç¨‹åºçš„æ–‡ä»¶ï¼Œå…·ä½“å–å†³äºä¼ é€’çš„é€‰é¡¹ï¼‰ã€‚

* Type: `number`
* Default: `60000`

### å¯ç”¨çš„åŠŸèƒ½

#### `server`

æ˜¯å¦å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨æ¥å“åº”æµ‹è¯•å¥—ä»¶ä¸­çš„è¯·æ±‚ã€‚

* Type: `boolean`
* Default: `true`

#### `build`

æ˜¯å¦è¿è¡Œä¸€ä¸ªå•ç‹¬çš„æ„å»ºæ­¥éª¤ã€‚

* Type: `boolean`
* Default: `true` (`false` if `browser` or `server` is disabled)

#### `browser`

åœ¨å¹•åï¼ŒNuxtæµ‹è¯•å·¥å…·ä½¿ç”¨[`playwright`](https://playwright.dev/)è¿›è¡Œæµè§ˆå™¨æµ‹è¯•ã€‚å¦‚æœè®¾ç½®äº†æ­¤é€‰é¡¹ï¼Œå°†å¯åŠ¨ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¹¶å¯ä»¥åœ¨åç»­çš„æµ‹è¯•å¥—ä»¶ä¸­è¿›è¡Œæ§åˆ¶ã€‚ï¼ˆå¯åœ¨[æ­¤å¤„](/docs/guide/going-further/testing)æ‰¾åˆ°æ›´å¤šä¿¡æ¯ã€‚ï¼‰

* Type: `boolean`
* Default: `false`

#### `browserOptions`

* Type: å…·æœ‰ä»¥ä¸‹å±æ€§çš„`å¯¹è±¡`
  * **type**: è¦å¯åŠ¨çš„æµè§ˆå™¨ç±»å‹ - `chromium`ã€`firefox`æˆ–`webkit`ä¹‹ä¸€
  * **launch**: ä¼ é€’ç»™playwrightåœ¨å¯åŠ¨æµè§ˆå™¨æ—¶ä½¿ç”¨çš„é€‰é¡¹çš„`å¯¹è±¡`ã€‚è¯·å‚é˜…å®Œæ•´çš„[API](https://playwright.dev/docs/api/class-browsertype#browser-type-launch)å‚è€ƒã€‚

#### `runner`

æŒ‡å®šæµ‹è¯•å¥—ä»¶çš„è¿è¡Œå™¨ã€‚å½“å‰æ¨èä½¿ç”¨[Vitest](https://vitest.dev/)ã€‚

* Type: `'vitest' | 'jest'`
* Default: `'vitest'`

## APIs

### ç”¨äºæ¸²æŸ“æµ‹è¯•çš„API

#### `$fetch(url)`

è·å–æœåŠ¡å™¨æ¸²æŸ“é¡µé¢çš„HTMLã€‚

```ts
import { $fetch } from '@nuxt/test-utils'

const html = await $fetch('/')
```

#### `fetch(url)`

è·å–æœåŠ¡å™¨æ¸²æŸ“é¡µé¢çš„å“åº”ã€‚

```ts
import { fetch } from '@nuxt/test-utils'

const res = await fetch('/')
const { body, headers } = res
```

#### `url(path)`

è·å–ç»™å®šé¡µé¢çš„å®Œæ•´URLï¼ˆåŒ…æ‹¬æµ‹è¯•æœåŠ¡å™¨è¿è¡Œçš„ç«¯å£ï¼‰ã€‚

```ts
import { url } from '@nuxt/test-utils'

const pageUrl = url('/page')
// 'http://localhost:6840/page'
```

## åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œæµ‹è¯•

::alert{icon=ğŸš§}
æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸­ï¼Œè¯·ä¿æŒå…³æ³¨ï¼
::
