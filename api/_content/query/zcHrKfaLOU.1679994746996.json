{"_path":"/api/utils/define-nuxt-route-middleware","_dir":"utils","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"defineNuxtRouteMiddleware","description":"Create named route middleware using defineNuxtRouteMiddleware helper function.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"definenuxtroutemiddleware"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create named route middleware using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"text","value":" helper function."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Route middleware are stored in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware/"}]},{"type":"text","value":" directory of your Nuxt application (unless "},{"type":"element","tag":"a","props":{"href":"/docs/api/configuration/nuxt-config#middleware"},"children":[{"type":"text","value":"set otherwise"}]},{"type":"text","value":")."}]},{"type":"element","tag":"h2","props":{"id":"type"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"code","props":{"code":"defineNuxtRouteMiddleware(middleware: RouteMiddleware) => RouteMiddleware\r\n\r\ninterface RouteMiddleware {\r\n  (to: RouteLocationNormalized, from: RouteLocationNormalized): ReturnType<NavigationGuard>\r\n}\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"(middleware: RouteMiddleware) "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" RouteMiddleware"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"RouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  ("}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"RouteLocationNormalized"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"RouteLocationNormalized"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"ReturnType"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"NavigationGuard"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"parameters"},"children":[{"type":"text","value":"Parameters"}]},{"type":"element","tag":"h3","props":{"id":"middleware"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":": "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RouteMiddleware"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A function that takes two Vue Router's route location objects as parameters: the next route "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"to"}]},{"type":"text","value":" as the first, and the current route "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" as the second."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Learn more about available properties of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RouteLocationNormalized"}]},{"type":"text","value":" in theÂ "},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://router.vuejs.org/api/interfaces/RouteLocationNormalized.html","rel":["nofollow"]},"children":[{"type":"text","value":"Vue Router docs"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"h3","props":{"id":"showing-error-page"},"children":[{"type":"text","value":"Showing Error Page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use route middleware to throw errors and show helpful error messages:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtRouteMiddleware((to) => {\r\n  if (to.params.id === '1') {\r\n    throw createError({ statusCode: 404, statusMessage: 'Page Not Found' })\r\n  }\r\n})\n","filename":"middleware/error.ts","language":"ts","meta":"[middleware/error.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"((to) "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" (to.params.id "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad495f"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"createError"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"({ statusCode: "}]},{"type":"element","tag":"span","props":{"class":"ct-f903a4"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":", statusMessage: "}]},{"type":"element","tag":"span","props":{"class":"ct-ad495f"},"children":[{"type":"text","value":"'Page Not Found'"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The above route middleware will redirect a user to the custom error page defined in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/error.vue"}]},{"type":"text","value":" file, and expose the error message and code passed from the middleware."}]},{"type":"element","tag":"h3","props":{"id":"redirection"},"children":[{"type":"text","value":"Redirection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" in combination with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"navigateTo"}]},{"type":"text","value":" helper function inside the route middleware to redirect users to different routes based on their authentication status:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtRouteMiddleware((to, from) => {\r\n  const auth = useState('auth')\r\n  \r\n  if (!auth.value.isAuthenticated) {\r\n    return navigateTo('/login')\r\n  }\r\n\r\n  return navigateTo('/dashboard')\r\n})\n","filename":"middleware/auth.ts","language":"ts","meta":"[middleware/auth.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":"((to, from) "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f903a4"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"useState"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ad495f"},"children":[{"type":"text","value":"'auth'"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"auth.value.isAuthenticated) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ad495f"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6fba"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd6789"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ad495f"},"children":[{"type":"text","value":"'/dashboard'"}]},{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c25be3"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-4aa68f"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Both "},{"type":"element","tag":"a","props":{"href":"/docs/api/utils/navigate-to"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/docs/api/utils/abort-navigation"},"children":[{"type":"text","value":"abortNavigation"}]},{"type":"text","value":" are globally available helper functions that you can use inside "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f903a4{color:#0550AE}\n.ct-ad495f{color:#0A3069}\n.ct-4aa68f{color:#953800}\n.ct-0d6fba{color:#CF222E}\n.ct-c25be3{color:#24292F}\n.ct-cd6789{color:#8250DF}\n.dark .ct-cd6789{color:#D2A8FF}\n.dark .ct-c25be3{color:#C9D1D9}\n.dark .ct-0d6fba{color:#FF7B72}\n.dark .ct-4aa68f{color:#FFA657}\n.dark .ct-ad495f{color:#A5D6FF}\n.dark .ct-f903a4{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"type","depth":2,"text":"Type"},{"id":"parameters","depth":2,"text":"Parameters","children":[{"id":"middleware","depth":3,"text":"middleware"}]},{"id":"examples","depth":2,"text":"Examples","children":[{"id":"showing-error-page","depth":3,"text":"Showing Error Page"},{"id":"redirection","depth":3,"text":"Redirection"}]}]}},"_type":"markdown","_id":"content:3.api:3.utils:define-nuxt-route-middleware.md","_source":"content","_file":"3.api/3.utils/define-nuxt-route-middleware.md","_extension":"md"}