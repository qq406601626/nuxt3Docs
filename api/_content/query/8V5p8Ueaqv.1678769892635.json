{"_path":"/api/composables/use-nuxt-data","_dir":"composables","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"useNuxtData","description":"useNuxtData gives you access to the current cached value of useAsyncData, useLazyAsyncData, useFetch and useLazyFetch with explicitly provided key.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"usenuxtdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useNuxtData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useNuxtData"}]},{"type":"text","value":" gives you access to the current cached value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":" with explicitly provided key."}]},{"type":"element","tag":"h2","props":{"id":"type"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"code","props":{"code":"useNuxtData<DataT = any> (key: string): { data: Ref<DataT | null> }\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"useNuxtData<"}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"DataT"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"> ("}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"Ref"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"DataT"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"> }"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"h3","props":{"id":"show-stale-data-while-fetching-in-the-background"},"children":[{"type":"text","value":"Show stale data while fetching in the background"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The example below shows how you can use cached data as a placeholder while the most recent data is being fetched from the server."}]},{"type":"element","tag":"code","props":{"code":"// We can access same data later using 'posts' key\r\nconst { data } = await useFetch('/api/posts', { key: 'posts' })\n","filename":"archive.vue","language":"ts","meta":"[archive.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// We can access same data later using 'posts' key"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'/api/posts'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":", { key: "}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'posts'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"// Access to the cached value of useFetch in archive.vue\r\nconst { data: posts } = useNuxtData('posts')\r\n\r\nconst { data } = await useFetch(`/api/posts/${postId}`, {\r\n  key: `post-${postId}`,\r\n  default: () => {\r\n    // Find the individual post from the cache and set it as the default value.\r\n    return posts.value.find(post => post.id === postId)\r\n  }\r\n})\n","filename":"single.vue","language":"ts","meta":"[single.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Access to the cached value of useFetch in archive.vue"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"posts"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useNuxtData"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'posts'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"`/api/posts/${"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"postId"}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  key: "}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"`post-${"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"postId"}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Find the individual post from the cache and set it as the default value."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" posts.value."}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" post.id "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" postId)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"optimistic-updates"},"children":[{"type":"text","value":"Optimistic Updates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can leverage the cache to update the UI after a mutation, while the data is being invalidated in the background."}]},{"type":"element","tag":"code","props":{"code":"// We can access same data later using 'todos' key\r\nconst { data } = await useFetch('/api/todos', { key: 'todos' })\n","filename":"todos.vue","language":"ts","meta":"[todos.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// We can access same data later using 'todos' key"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'/api/todos'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":", { key: "}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'todos'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"const newTodo = ref('')\r\nconst previousTodos = ref([])\r\n\r\n// Access to the cached value of useFetch in todos.vue\r\nconst { data: todos } = useNuxtData('todos')\r\n\r\nconst { data } = await useFetch('/api/addTodo', {\r\n  key: 'addTodo',\r\n  method: 'post',\r\n  body: {\r\n    todo: newTodo.value\r\n  },\r\n  onRequest () {\r\n    previousTodos.value = todos.value // Store the previously cached value to restore if fetch fails.\r\n\r\n    todos.value.push(newTodo.value) // Optimistically update the todos.\r\n  },\r\n  onRequestError () {\r\n    todos.value = previousTodos.value // Rollback the data if the request failed.\r\n  },\r\n  async onResponse () {\r\n    await refreshNuxtData('todos') // Invalidate todos in the background if the request succeeded.\r\n  }\r\n})\n","filename":"add-todo.vue","language":"ts","meta":"[add-todo.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"newTodo"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"previousTodos"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"([])"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Access to the cached value of useFetch in todos.vue"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-15feee"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"todos"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useNuxtData"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'todos'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-23acd1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'/api/addTodo'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  key: "}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'addTodo'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  method: "}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'post'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  body: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    todo: newTodo.value"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"onRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    previousTodos.value "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" todos.value "}]},{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Store the previously cached value to restore if fetch fails."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    todos.value."}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"(newTodo.value) "}]},{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Optimistically update the todos."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"onRequestError"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    todos.value "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" previousTodos.value "}]},{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Rollback the data if the request failed."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"onResponse"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b25435"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81e2bb"},"children":[{"type":"text","value":"refreshNuxtData"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c5f050"},"children":[{"type":"text","value":"'todos'"}]},{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-032ea3"},"children":[{"type":"text","value":"// Invalidate todos in the background if the request succeeded."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-18d771"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c5f050{color:#0A3069}\n.ct-81e2bb{color:#8250DF}\n.ct-032ea3{color:#6E7781}\n.ct-23acd1{color:#0550AE}\n.ct-b25435{color:#CF222E}\n.ct-15feee{color:#953800}\n.ct-18d771{color:#24292F}\n.dark .ct-18d771{color:#C9D1D9}\n.dark .ct-15feee{color:#FFA657}\n.dark .ct-b25435{color:#FF7B72}\n.dark .ct-23acd1{color:#79C0FF}\n.dark .ct-032ea3{color:#8B949E}\n.dark .ct-81e2bb{color:#D2A8FF}\n.dark .ct-c5f050{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"type","depth":2,"text":"Type"},{"id":"examples","depth":2,"text":"Examples","children":[{"id":"show-stale-data-while-fetching-in-the-background","depth":3,"text":"Show stale data while fetching in the background"},{"id":"optimistic-updates","depth":3,"text":"Optimistic Updates"}]}]}},"_type":"markdown","_id":"content:3.api:1.composables:use-nuxt-data.md","_source":"content","_file":"3.api/1.composables/use-nuxt-data.md","_extension":"md"}