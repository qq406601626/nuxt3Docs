{"_path":"/migration/component-options","_dir":"migration","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Component Options","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"component-options"},"children":[{"type":"text","value":"Component Options"}]},{"type":"element","tag":"h2","props":{"id":"asyncdata-and-fetch-component-options"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" component options"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3 provides new options for "},{"type":"element","tag":"a","props":{"href":"/docs/getting-started/data-fetching"},"children":[{"type":"text","value":"fetching data from an API"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"isomorphic-fetch"},"children":[{"type":"text","value":"Isomorphic Fetch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In Nuxt 2 you might use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@nuxtjs/axios"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@nuxt/http"}]},{"type":"text","value":" to fetch your data - or just the polyfilled global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In Nuxt 3 you can use a globally available "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" method that has the same API as "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch","rel":["nofollow"]},"children":[{"type":"text","value":"the Fetch API"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" method which is using "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/ofetch","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/ofetch"}]},{"type":"text","value":". It has a number of benefits, including:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It will handle 'smartly' making "},{"type":"element","tag":"a","props":{"href":"/docs/guide/concepts/server-engine#direct-api-calls"},"children":[{"type":"text","value":"direct API calls"}]},{"type":"text","value":" if it's running on the server, or making a client-side call to your API if it's running on the client. (It can also handle calling third-party APIs.)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Plus, it comes with convenience features including automatically parsing responses and stringifying data."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can read more "},{"type":"element","tag":"a","props":{"href":"/docs/guide/concepts/server-engine#direct-api-calls"},"children":[{"type":"text","value":"about direct API calls"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/docs/getting-started/data-fetching"},"children":[{"type":"text","value":"fetching data"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"using-composables"},"children":[{"type":"text","value":"Using Composables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3 provides new composables for fetching data: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":". They each have 'lazy' variants ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":"), which do not block client-side navigation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In Nuxt 2, you'd fetch your data in your component using a syntax similar to:"}]},{"type":"element","tag":"code","props":{"code":"export default {\r\n  async asyncData({ params, $http }) {\r\n    const post = await $http.$get(`https://api.nuxtjs.dev/posts/${params.id}`)\r\n    return { post }\r\n  },\r\n  // or alternatively\r\n  fetch () {\r\n    this.post = await $http.$get(`https://api.nuxtjs.dev/posts/${params.id}`)\r\n  }\r\n}\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"({ params, $http }) "}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" $http."}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"$get"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"`https://api.nuxtjs.dev/posts/${"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" { post }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  }"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e46613"},"children":[{"type":"text","value":"// or alternatively"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":".post "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" $http."}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"$get"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"`https://api.nuxtjs.dev/posts/${"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Within your methods and templates, you could use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"post"}]},{"type":"text","value":" variable similar how you'd use any other piece of data provided by your component."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With Nuxt 3, you can perform this data fetching using composables in your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"setup()"}]},{"type":"text","value":" method or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":" tag:"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\n  // Define params wherever, through `defineProps()`, `useRoute()`, etc.\r\n  const { data: post, refresh } = await useAsyncData('post', () => $fetch(`https://api.nuxtjs.dev/posts/${params.id}`) )\r\n  // Or instead - useFetch is a convenience wrapper around useAsyncData when you're just performing a simple fetch\r\n  const { data: post, refresh } = await useFetch(`https://api.nuxtjs.dev/posts/${params.id}`)\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e46613"},"children":[{"type":"text","value":"// Define params wherever, through `defineProps()`, `useRoute()`, etc."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"'post'"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"`https://api.nuxtjs.dev/posts/${"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":") )"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e46613"},"children":[{"type":"text","value":"// Or instead - useFetch is a convenience wrapper around useAsyncData when you're just performing a simple fetch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d41b1b"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"`https://api.nuxtjs.dev/posts/${"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can now use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"post"}]},{"type":"text","value":" inside of your Nuxt 3 template, or call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh"}]},{"type":"text","value":" to update the data."}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Despite the names, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" is not a direct replacement of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch()"}]},{"type":"text","value":" hook. Rather, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" replaces both hooks and is more customizable; it can do more than simply fetching data from an endpoint. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" is a convenience wrapper around "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" for simply fetching data from an endpoint."}]}]},{"type":"element","tag":"h3","props":{"id":"migration"},"children":[{"type":"text","value":"Migration"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Replace the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" hook with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" in your page/component."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Replace the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" hook with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" in your component."}]}]},{"type":"element","tag":"h2","props":{"id":"head"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"head"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/docs/migration/meta"},"children":[{"type":"text","value":"meta tag migration"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"key"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can now define a key within the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" compiler macro."}]},{"type":"element","tag":"code","props":{"code":"- <script>\r\n- export default {\r\n-   key: 'index'\r\n-   // or a method\r\n-   // key: route => route.fullPath\r\n- }\r\n+ <script setup>\r\n+ definePageMeta({\r\n+   key: 'index'\r\n+   // or a method\r\n+   // key: route => route.fullPath\r\n+ })\r\n  </script>\n","filename":"pages/index.vue","language":"diff","meta":"[pages/index.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- <script>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- export default {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-   key: 'index'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-   // or a method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-   // key: route => route.fullPath"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ <script setup>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ definePageMeta({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+   key: 'index'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+   // or a method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+   // key: route => route.fullPath"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  </script>"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"migration-1"},"children":[{"type":"text","value":"Migration"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Migrate "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" from component options to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h2","props":{"id":"layout"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/docs/migration/pages-and-layouts"},"children":[{"type":"text","value":"layout migration"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"loading"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This feature is not yet supported in Nuxt 3."}]},{"type":"element","tag":"h2","props":{"id":"middleware"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/docs/migration/plugins-and-middleware"},"children":[{"type":"text","value":"middleware migration"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"scrolltotop"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scrollToTop"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This feature is not yet supported in Nuxt 3. If you want to overwrite the default scroll behavior of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue-router"}]},{"type":"text","value":", you can do so in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/app/router.options.ts"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"/docs/guide/directory-structure/pages/#router-options"},"children":[{"type":"text","value":"docs"}]},{"type":"text","value":") for more info."}]},{"type":"element","tag":"h2","props":{"id":"transition"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"transition"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/docs/migration/pages-and-layouts"},"children":[{"type":"text","value":"layout migration"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"validate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"validate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The validate hook in Nuxt 3 only accepts a single argument, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"route"}]},{"type":"text","value":". Just as in Nuxt 2, you can return a boolean value. If you return false and another match can't be found, this will mean a 404. You can also directly return an object with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"statusCode"}]},{"type":"text","value":"/"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"statusMessage"}]},{"type":"text","value":" to respond immediately with an error (other matches will not be checked)."}]},{"type":"element","tag":"code","props":{"code":"- <script>\r\n- export default {\r\n-   async validate({ params }) {\r\n-     return /^\\d+$/.test(params.id)\r\n-   }\r\n- }\r\n+ <script setup>\r\n+ definePageMeta({\r\n+   validate: async (route) => {\r\n+     const nuxtApp = useNuxtApp()\r\n+     return /^\\d+$/.test(route.params.id)\r\n+   }\r\n+ })\r\n  </script>\n","filename":"pages/users/[id].vue","language":"diff","meta":"[pages/users/[id].vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- <script>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- export default {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-   async validate({ params }) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-     return /^\\d+$/.test(params.id)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"-   }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5fefd1"},"children":[{"type":"text","value":"- }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ <script setup>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ definePageMeta({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+   validate: async (route) => {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+     const nuxtApp = useNuxtApp()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+     return /^\\d+$/.test(route.params.id)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+   }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"+ })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"  </script>"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"watchquery"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"watchQuery"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is not supported in Nuxt 3. Instead, you can directly use a watcher to trigger refetching data."}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst route = useRoute()\r\nconst { data, refresh } = await useFetch('/api/user')\r\nwatch(() => route.query, () => refresh())\r\n</script>\n","filename":"pages/users/[id].vue","language":"vue","meta":"[pages/users/[id].vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"route"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"useRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f7763e"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-df599b"},"children":[{"type":"text","value":"'/api/user'"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" route.query, () "}]},{"type":"element","tag":"span","props":{"class":"ct-da0a99"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cccd6"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-51a408"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-94f3f8"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5fefd1{color:#82071E}\n.ct-51a408{color:#116329}\n.ct-e46613{color:#6E7781}\n.ct-df599b{color:#0A3069}\n.ct-f7763e{color:#0550AE}\n.ct-94f3f8{color:#24292F}\n.ct-6cccd6{color:#8250DF}\n.ct-d41b1b{color:#953800}\n.ct-da0a99{color:#CF222E}\n.dark .ct-da0a99{color:#FF7B72}\n.dark .ct-d41b1b{color:#FFA657}\n.dark .ct-6cccd6{color:#D2A8FF}\n.dark .ct-94f3f8{color:#C9D1D9}\n.dark .ct-f7763e{color:#79C0FF}\n.dark .ct-df599b{color:#A5D6FF}\n.dark .ct-e46613{color:#8B949E}\n.dark .ct-51a408{color:#7EE787}\n.dark .ct-5fefd1{color:#FFA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"asyncdata-and-fetch-component-options","depth":2,"text":"asyncData and fetch component options","children":[{"id":"isomorphic-fetch","depth":3,"text":"Isomorphic Fetch"},{"id":"using-composables","depth":3,"text":"Using Composables"},{"id":"migration","depth":3,"text":"Migration"}]},{"id":"head","depth":2,"text":"head"},{"id":"key","depth":2,"text":"key","children":[{"id":"migration-1","depth":3,"text":"Migration"}]},{"id":"layout","depth":2,"text":"layout"},{"id":"loading","depth":2,"text":"loading"},{"id":"middleware","depth":2,"text":"middleware"},{"id":"scrolltotop","depth":2,"text":"scrollToTop"},{"id":"transition","depth":2,"text":"transition"},{"id":"validate","depth":2,"text":"validate"},{"id":"watchquery","depth":2,"text":"watchQuery"}]}},"_type":"markdown","_id":"content:7.migration:7.component-options.md","_source":"content","_file":"7.migration/7.component-options.md","_extension":"md"}