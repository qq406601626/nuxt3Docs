{"_path":"/guide/going-further/internals","_dir":"going-further","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"How Nuxt Works?","description":"Nuxt is a minimal but highly customizable framework to build web applications.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"how-nuxt-works"},"children":[{"type":"text","value":"How Nuxt Works?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt is a minimal but highly customizable framework to build web applications. This guide helps you better understand Nuxt internals to develop new solutions and module integrations on top of Nuxt."}]},{"type":"element","tag":"h2","props":{"id":"the-nuxt-interface"},"children":[{"type":"text","value":"The Nuxt Interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When you start Nuxt in development mode with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxi dev"}]},{"type":"text","value":" or building a production application with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxi build"}]},{"type":"text","value":",\r\na common context will be created, referred to as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt"}]},{"type":"text","value":" internally. It holds normalized options merged with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":" file,\r\nsome internal state, and a powerful "},{"type":"element","tag":"a","props":{"href":"/docs/api/advanced/hooks"},"children":[{"type":"text","value":"hooking system"}]},{"type":"text","value":" powered by "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/hookable","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/hookable"}]},{"type":"text","value":"\r\nallowing different components to communicate with each other. You can think of it as "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Builder Core"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This context is globally available to be used with "},{"type":"element","tag":"a","props":{"href":"/docs/api/advanced/kit"},"children":[{"type":"text","value":"nuxt/kit"}]},{"type":"text","value":" composables.\r\nTherefore only one instance of Nuxt is allowed to run per process."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To extend the Nuxt interface and hook into different stages of the build process, we can use "},{"type":"element","tag":"a","props":{"href":"/docs/guide/going-further/modules"},"children":[{"type":"text","value":"Nuxt Modules"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For more details, check out "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/blob/main/packages/nuxt/src/core/nuxt.ts","rel":["nofollow"]},"children":[{"type":"text","value":"the source code"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"the-nuxtapp-interface"},"children":[{"type":"text","value":"The NuxtApp Interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When rendering a page in the browser or on the server, a shared context will be created, referred to as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"text","value":".\r\nThis context keeps vue instance, runtime hooks, and internal states like ssrContext and payload for hydration.\r\nYou can think of it as "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Runtime Core"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This context can be accessed using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useNuxtApp()"}]},{"type":"text","value":" composable within Nuxt plugins and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":" and vue composables.\r\nGlobal usage is possible for the browser but not on the server, to avoid sharing context between users."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To extend the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"text","value":" interface and hook into different stages or access contexts, we can use "},{"type":"element","tag":"a","props":{"href":"/docs/guide/directory-structure/plugins"},"children":[{"type":"text","value":"Nuxt Plugins"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check "},{"type":"element","tag":"a","props":{"href":"/docs/api/composables/use-nuxt-app"},"children":[{"type":"text","value":"Nuxt App"}]},{"type":"text","value":" for more information about this interface."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"text","value":" has the following properties:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: this is an internal interface, and some properties might change until stable release."}]},{"type":"element","tag":"code","props":{"code":"const nuxtApp = {\r\n  vueApp, // the global Vue application: https://vuejs.org/api/application.html#application-api\r\n\r\n  versions, // an object containing Nuxt and Vue versions\r\n\r\n  // These let you call and add runtime NuxtApp hooks\r\n  // https://github.com/nuxt/nuxt/blob/main/packages/nuxt/src/app/nuxt.ts#L18\r\n  hooks,\r\n  hook,\r\n  callHook,\r\n\r\n  // Only accessible on server-side\r\n  ssrContext: {\r\n    url,\r\n    req,\r\n    res,\r\n    runtimeConfig,\r\n    noSSR,\r\n  },\r\n\r\n  // This will be stringified and passed from server to client\r\n  payload: {\r\n    serverRendered: true,\r\n    data: {},\r\n    state: {}\r\n  }\r\n\r\n  provide: (name: string, value: any) => void\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b23cd0"},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  vueApp, "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// the global Vue application: https://vuejs.org/api/application.html#application-api"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  versions, "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// an object containing Nuxt and Vue versions"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// These let you call and add runtime NuxtApp hooks"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// https://github.com/nuxt/nuxt/blob/main/packages/nuxt/src/app/nuxt.ts#L18"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  hooks,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  hook,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  callHook,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// Only accessible on server-side"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  ssrContext: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    url,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    req,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    res,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    runtimeConfig,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    noSSR,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e66c0c"},"children":[{"type":"text","value":"// This will be stringified and passed from server to client"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  payload: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    serverRendered: "}]},{"type":"element","tag":"span","props":{"class":"ct-b23cd0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    data: {},"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"    state: {}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"  provide: ("}]},{"type":"element","tag":"span","props":{"class":"ct-8ff9b5"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b23cd0"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ff9b5"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b23cd0"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfd4a0"},"children":[{"type":"text","value":"void"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-11a358"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"stability-edge","props":{"title":"nuxtApp.versions"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For more details, check out "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/blob/main/packages/nuxt/src/app/nuxt.ts","rel":["nofollow"]},"children":[{"type":"text","value":"the source code"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"runtime-context-vs-build-context"},"children":[{"type":"text","value":"Runtime Context vs. Build Context"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt builds and bundles project using Node.js but also has a runtime side."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While both areas can be extended, that runtime context is isolated from build-time. Therefore, they are not supposed to share state, code, or context other than runtime configuration!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/docs/guide/going-further/modules"},"children":[{"type":"text","value":"Nuxt Modules"}]},{"type":"text","value":" can be used to extend the build context, and "},{"type":"element","tag":"a","props":{"href":"/docs/guide/directory-structure/plugins"},"children":[{"type":"text","value":"Nuxt Plugins"}]},{"type":"text","value":" can be used to extend runtime."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When building an application for production, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxi build"}]},{"type":"text","value":" will generate a standalone build\r\nin the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".output"}]},{"type":"text","value":" directory, independent of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/docs/guide/going-further/modules"},"children":[{"type":"text","value":"Nuxt modules"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8ff9b5{color:#953800}\n.ct-e66c0c{color:#6E7781}\n.ct-b23cd0{color:#0550AE}\n.ct-11a358{color:#24292F}\n.ct-dfd4a0{color:#CF222E}\n.dark .ct-dfd4a0{color:#FF7B72}\n.dark .ct-11a358{color:#C9D1D9}\n.dark .ct-b23cd0{color:#79C0FF}\n.dark .ct-e66c0c{color:#8B949E}\n.dark .ct-8ff9b5{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"the-nuxt-interface","depth":2,"text":"The Nuxt Interface"},{"id":"the-nuxtapp-interface","depth":2,"text":"The NuxtApp Interface"},{"id":"runtime-context-vs-build-context","depth":2,"text":"Runtime Context vs. Build Context"}]}},"_type":"markdown","_id":"content:2.guide:3.going-further:1.internals.md","_source":"content","_file":"2.guide/3.going-further/1.internals.md","_extension":"md"}