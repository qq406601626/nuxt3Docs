{"_path":"/getting-started/data-fetching","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Data Fetching","description":"Nuxt provides composables to handle data fetching within your application.","navigation":{"icon":"uil:channel"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"data-fetching"},"children":[{"type":"text","value":"Data Fetching"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt provides useFetch, useLazyFetch, useAsyncData and useLazyAsyncData to handle data fetching within your application."}]},{"type":"element","tag":"alert","props":{"icon":"ðŸ‘‰"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":" only work during "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"setup"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Lifecycle Hooks"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"usefetch"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Within your pages, components and plugins you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" to universally fetch from any URL."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This composable provides a convenient wrapper around "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":". It automatically generates a key based on URL and fetch options, provides type hints for request url based on server routes, and infers API response type."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-fetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data: count } = await useFetch('/api/count')\r\n</script>\r\n\r\n<template>\r\n  Page visits: {{ count }}\r\n</template>\n","filename":"app.vue","language":"vue","meta":"[app.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  Page visits: {{ count }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"link-example","props":{"link":"/docs/examples/composables/use-fetch"},"children":[]},{"type":"element","tag":"h2","props":{"id":"uselazyfetch"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This composable behaves identically to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy: true"}]},{"type":"text","value":" option set. In other words, the async function does not block navigation. That means you will need to handle the situation where the data is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":" (or whatever value you have provided in a custom "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" factory function)."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-lazy-fetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example-1"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <!-- you will need to handle a loading state -->\r\n  <div v-if=\"pending\">\r\n    Loading ...\r\n  </div>\r\n  <div v-else>\r\n    <div v-for=\"post in posts\">\r\n      <!-- do something -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: posts } = useLazyFetch('/api/posts')\r\nwatch(posts, (newPosts) => {\r\n  // Because posts starts out null, you will not have access\r\n  // to its contents immediately, but you can watch it.\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"<!-- you will need to handle a loading state -->"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"v-if"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"pending\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    Loading ..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"v-else"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"v-for"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"post in posts\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"<!-- do something -->"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"posts"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/posts'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(posts, ("}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"newPosts"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"// Because posts starts out null, you will not have access"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"// to its contents immediately, but you can watch it."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"useasyncdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Within your pages, components and plugins you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" to get access to data that resolves asynchronously."}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You might be asking yourself: what is the difference between "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":"?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In brief, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" receives a URL and gets that data, whereas "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" might have more complex logic. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch(url)"}]},{"type":"text","value":" is nearly equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData(url, () => $fetch(url))"}]},{"type":"text","value":" - it's developer experience sugar for the most common use case."}]}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-async-data"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example-2"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"let counter = 0\r\nexport default defineEventHandler(() => {\r\n  counter++\r\n  return counter\r\n})\n","filename":"server/api/count.ts","language":"ts","meta":"[server/api/count.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" counter "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  counter"}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"++"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" counter"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data } = await useAsyncData('count', () => $fetch('/api/count'))\r\n</script>\r\n\r\n<template>\r\n  Page visits: {{ data }}\r\n</template>\n","filename":"app.vue","language":"vue","meta":"[app.vue]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  Page visits: {{ data }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"link-example","props":{"link":"/docs/examples/composables/use-async-data"},"children":[]},{"type":"element","tag":"h2","props":{"id":"uselazyasyncdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This composable behaves identically to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy: true"}]},{"type":"text","value":" option set. In other words, the async function does not block navigation. That means you will need to handle the situation where the data is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":" (or whatever value you have provided in a custom "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" factory function)."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/composables/use-lazy-async-data"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example-3"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <div>\r\n    {{ pending ? 'Loading' : count }}\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: count } = useLazyAsyncData('count', () => $fetch('/api/count'))\r\nwatch(count, (newCount) => {\r\n  // Because count starts out null, you won't have access\r\n  // to its contents immediately, but you can watch it.\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    {{ pending ? 'Loading' : count }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(count, ("}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"newCount"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"// Because count starts out null, you won't have access"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"// to its contents immediately, but you can watch it."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"refreshing-data"},"children":[{"type":"text","value":"Refreshing Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes throughout the course of your user's page visit, you may need to refresh the data loaded from the API. This can happen if the user chooses to paginate, filter results, search, etc."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can make use of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":" method returned from the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch()"}]},{"type":"text","value":" composable to refresh the data with different query parameters:"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst page = ref(1);\r\n\r\nconst { data: users, pending, refresh, error } = await useFetch(() => `users?page=${page.value}&take=6`, { baseURL: config.API_BASE_URL }\r\n);\r\n\r\nfunction previous() {\r\n  page.value--;\r\n  refresh();\r\n}\r\n\r\nfunction next() {\r\n  page.value++;\r\n  refresh();\r\n}\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"`users?page=${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"}&take=6`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", { baseURL: config."}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"API_BASE_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"previous"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  page.value"}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  page.value"}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The key to making this work is to call the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":" method returned from the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch()"}]},{"type":"text","value":" composable when a query parameter has changed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refresh()"}]},{"type":"text","value":" will cancel any pending requests; their result will not update the data or pending state. Any previously awaited promises will not resolve until this new request resolves. You can prevent this behaviour by setting the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dedupe"}]},{"type":"text","value":" option, which will instead return the promise for the currently-executing request, if there is one."}]},{"type":"element","tag":"code","props":{"code":"refresh({ dedupe: true })\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"({ dedupe: "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"refreshnuxtdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refreshNuxtData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Invalidate the cache of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":" and trigger the refetch."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This method is useful if you want to refresh all the data fetching for a current page."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/refresh-nuxt-data"},"children":[]},{"type":"element","tag":"h4","props":{"id":"example-4"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"<template>\r\n  <div>\r\n    {{ pending ? 'Loading' : count }}\r\n  </div>\r\n  <button @click=\"refresh\">Refresh</button>\r\n</template>\r\n\r\n<script setup>\r\nconst { pending, data: count } = useLazyAsyncData('count', () => $fetch('/api/count'))\r\n\r\nconst refresh = () => refreshNuxtData('count')\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    {{ pending ? 'Loading' : count }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"refresh\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">Refresh</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"refreshNuxtData"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"clearnuxtdata"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clearNuxtData"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Delete cached data, error status and pending promises of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This method is useful if you want to invalidate the data fetching for another page."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/clear-nuxt-data"},"children":[]},{"type":"element","tag":"h2","props":{"id":"options-api-support"},"children":[{"type":"text","value":"Options API support"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3 provides a way to perform "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" fetching within the Options API. You must wrap your component definition within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defineNuxtComponent"}]},{"type":"text","value":" for this to work."}]},{"type":"element","tag":"code","props":{"code":"<script>\r\nexport default defineNuxtComponent({\r\n  fetchKey: 'hello',\r\n  async asyncData () {\r\n    return {\r\n      hello: await $fetch('/api/hello')\r\n    }\r\n  }\r\n})\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"defineNuxtComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"fetchKey: "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'hello'"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      hello: "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/hello'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]},{"type":"text","value":" is the recommended way of declaring Vue components in Nuxt 3."}]}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/define-nuxt-component"},"children":[]},{"type":"element","tag":"h2","props":{"id":"isomorphic-fetch-and-fetch"},"children":[{"type":"text","value":"Isomorphic "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When we call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" in the browser, user headers like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" will be directly sent to the API. But during server-side-rendering, since the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" request takes place 'internally' within the server, it doesn't include the user's browser cookies, nor does it pass on cookies from the fetch response."}]},{"type":"element","tag":"read-more","props":{"link":"/docs/api/utils/dollarfetch"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example-pass-client-headers-to-the-api"},"children":[{"type":"text","value":"Example: Pass Client Headers to the API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can use "},{"type":"element","tag":"a","props":{"href":"/docs/api/composables/use-request-headers"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" to access and proxy cookies to the API from server-side."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The example below adds the request headers to an isomorphic "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" call to ensure that the API endpoint has access to the same "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" header originally sent by the user."}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst headers = useRequestHeaders(['cookie'])\r\nconst { data } = await useFetch('/api/me', { headers })\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useRequestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"])"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/me'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", { headers })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Be very careful before proxying headers to an external API and just include headers that you need. Not all headers are safe to be bypassed and might introduce unwanted behavior. Here is a list of common headers that are NOT to be proxied:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"accept"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-length"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-md5"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content-type"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-host"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-port"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-forwarded-proto"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cf-connecting-ip"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cf-ray"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-pass-cookies-from-server-side-api-calls-on-ssr-response"},"children":[{"type":"text","value":"Example: Pass Cookies From Server-side API Calls on SSR Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to pass on/proxy cookies in the other direction, from an internal request back to the client, you will need to handle this yourself."}]},{"type":"element","tag":"code","props":{"code":"export const fetchWithCookie = async (event: H3Event, url: string) => {\r\n  const res = await $fetch.raw(url)\r\n  const cookies = (res.headers.get('set-cookie') || '').split(',')\r\n  for (const cookie of cookies) {\r\n    appendHeader(event, 'set-cookie', cookie)\r\n  }\r\n  return res._data\r\n}\n","filename":"composables/fetch.ts","language":"ts","meta":"[composables/fetch.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"fetchWithCookie"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"H3Event"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" $fetch."}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"raw"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(url)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"cookies"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" (res.headers."}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'set-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"','"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" cookies) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"appendHeader"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(event, "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'set-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", cookie)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" res._data"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\r\n// This composable will automatically pass cookies to the client\r\nconst event = useRequestEvent()\r\nconst result = await fetchWithCookie(event, '/api/with-cookie')\r\nonMounted(() => console.log(document.cookie))\r\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4c0c08"},"children":[{"type":"text","value":"// This composable will automatically pass cookies to the client"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useRequestEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"fetchWithCookie"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(event, "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/with-cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"onMounted"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" console."}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(document.cookie))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"best-practices"},"children":[{"type":"text","value":"Best Practices"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The data returned by these composables will be stored inside the page payload. This means that every key returned that is not used in your component will be added to the payload."}]},{"type":"element","tag":"alert","props":{"icon":"ðŸ‘‰"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"We strongly recommend you only select the keys that you will use in your component."}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Imagine that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/mountains/everest"}]},{"type":"text","value":" returns the following object:"}]},{"type":"element","tag":"code","props":{"code":"{\r\n  \"title\": \"Mount Everest\",\r\n  \"description\": \"Mount Everest is Earth's highest mountain above sea level, located in the Mahalangur Himal sub-range of the Himalayas. The Chinaâ€“Nepal border runs across its summit point\",\r\n  \"height\": \"8,848 m\",\r\n  \"countries\": [\r\n    \"China\",\r\n    \"Nepal\"\r\n  ],\r\n  \"continent\": \"Asia\",\r\n  \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Everest_kalapatthar.jpg/600px-Everest_kalapatthar.jpg\"\r\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"title\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"Mount Everest\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"description\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"Mount Everest is Earth's highest mountain above sea level, located in the Mahalangur Himal sub-range of the Himalayas. The Chinaâ€“Nepal border runs across its summit point\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"height\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"8,848 m\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"countries\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"China\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"Nepal\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"continent\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"Asia\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"\"image\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"\"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Everest_kalapatthar.jpg/600px-Everest_kalapatthar.jpg\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you plan to only use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"title"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"description"}]},{"type":"text","value":" in your component, you can select the keys by chaining the result of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pick"}]},{"type":"text","value":" option:"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\r\nconst { data: mountain } = await useFetch('/api/mountains/everest', { pick: ['title', 'description'] })\r\n</script>\r\n\r\n<template>\r\n  <h1>{{ mountain.title }}</h1>\r\n  <p>{{ mountain.description }}</p>\r\n</template>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"mountain"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'/api/mountains/everest'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", { pick: ["}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'title'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"'description'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"] })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">{{ mountain.title }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">{{ mountain.description }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-async-setup"},"children":[{"type":"text","value":"Using Async Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you are using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async setup()"}]},{"type":"text","value":", the current component instance will be lost after the first "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"await"}]},{"type":"text","value":". (This is a Vue 3 limitation.) If you want to use multiple async operations, such as multiple calls to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":", you will need to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":" or await them together at the end of setup."}]},{"type":"element","tag":"alert","props":{"icon":"ðŸ‘‰"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":" is recommended, as it removes the limitation of using top-level await. "},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/api/sfc-script-setup.html#top-level-await","rel":["nofollow"]},"children":[{"type":"text","value":"Read more"}]}]}]},{"type":"element","tag":"code","props":{"code":"<script>\r\nexport default defineComponent({\r\n  async setup() {\r\n    const [{ data: organization }, { data: repos }] = await Promise.all([\r\n      useFetch(`https://api.github.com/orgs/nuxt`),\r\n      useFetch(`https://api.github.com/orgs/nuxt/repos`)\r\n    ])\r\n\r\n    return {\r\n      organization,\r\n      repos\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <header>\r\n    <h1>{{ organization.login }}</h1>\r\n    <p>{{ organization.description }}</p>\r\n  </header>\r\n</template>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"defineComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" [{ "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"organization"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" }, { "}]},{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"repos"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" }] "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c3015"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"(["}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"`https://api.github.com/orgs/nuxt`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-094752"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2ff503"},"children":[{"type":"text","value":"`https://api.github.com/orgs/nuxt/repos`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    ])"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c848ee"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      organization,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"      repos"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e80054"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"header"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">{{ organization.login }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">{{ organization.description }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"header"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-8c4c31"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff4df"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"directly-calling-an-api-endpoint"},"children":[{"type":"text","value":"Directly Calling an API Endpoint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are instances where you may need to directly call the API. Nuxt 3 provides a globally available "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" method using "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/ofetch","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/ofetch"}]},{"type":"text","value":" (in addition to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":")\r\nwith the same API as the "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch","rel":["nofollow"]},"children":[{"type":"text","value":"Fetch API"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" has a number of benefits, including:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It will handle 'smartly' making direct API calls if it's running on the server, or making a client-side call to your API if it's running on the client. (It can also handle calling third-party APIs.)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Plus, it comes with convenience features including automatically parsing responses and stringifying data."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4c0c08{color:#6E7781}\n.ct-2ff503{color:#0A3069}\n.ct-094752{color:#8250DF}\n.ct-e80054{color:#953800}\n.ct-c848ee{color:#CF222E}\n.ct-7c3015{color:#0550AE}\n.ct-8c4c31{color:#116329}\n.ct-7ff4df{color:#24292F}\n.dark .ct-7ff4df{color:#C9D1D9}\n.dark .ct-8c4c31{color:#7EE787}\n.dark .ct-7c3015{color:#79C0FF}\n.dark .ct-c848ee{color:#FF7B72}\n.dark .ct-e80054{color:#FFA657}\n.dark .ct-094752{color:#D2A8FF}\n.dark .ct-2ff503{color:#A5D6FF}\n.dark .ct-4c0c08{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usefetch","depth":2,"text":"useFetch","children":[{"id":"example","depth":3,"text":"Example"}]},{"id":"uselazyfetch","depth":2,"text":"useLazyFetch","children":[{"id":"example-1","depth":3,"text":"Example"}]},{"id":"useasyncdata","depth":2,"text":"useAsyncData","children":[{"id":"example-2","depth":3,"text":"Example"}]},{"id":"uselazyasyncdata","depth":2,"text":"useLazyAsyncData","children":[{"id":"example-3","depth":3,"text":"Example"}]},{"id":"refreshing-data","depth":2,"text":"Refreshing Data","children":[{"id":"refreshnuxtdata","depth":3,"text":"refreshNuxtData"},{"id":"clearnuxtdata","depth":3,"text":"clearNuxtData"}]},{"id":"options-api-support","depth":2,"text":"Options API support"},{"id":"isomorphic-fetch-and-fetch","depth":2,"text":"Isomorphic fetch and $fetch","children":[{"id":"example-pass-client-headers-to-the-api","depth":3,"text":"Example: Pass Client Headers to the API"},{"id":"example-pass-cookies-from-server-side-api-calls-on-ssr-response","depth":3,"text":"Example: Pass Cookies From Server-side API Calls on SSR Response"}]},{"id":"best-practices","depth":2,"text":"Best Practices"},{"id":"using-async-setup","depth":2,"text":"Using Async Setup"},{"id":"directly-calling-an-api-endpoint","depth":2,"text":"Directly Calling an API Endpoint"}]}},"_type":"markdown","_id":"content:1.getting-started:6.data-fetching.md","_source":"content","_file":"1.getting-started/6.data-fetching.md","_extension":"md"}